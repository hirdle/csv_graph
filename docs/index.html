<!DOCTYPE html>
<head>
 <meta charset="utf-8">
 <meta http-equiv="X-UA-Compatible" content="IE=edge">
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
 <!-- http://t.co/dKP3o1e -->
 <meta name="HandheldFriendly" content="True">
 <meta name="MobileOptimized" content="320">

 <title>Графики</title>
 <meta name="description" content="test">

 <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
 <script src="jquery.csv.min.js"></script>
 <script type="text/javascript" src="http://www.google.com/jsapi"></script>

<script type="text/javascript"> // load the visualisation API
  google.load('visualization', '1', { packages: ['corechart', 'controls'] });
</script>

<script type="text/javascript">
google.setOnLoadCallback(() => {
   $.get("data_11_6.csv", function(csvString) {
      // transform the CSV string into a 2-dimensional array
      var arrayData = $.csv.toArrays(csvString, {onParseValue: $.csv.hooks.castToScalar});
      arrayData = arrayData.slice(Math.max(arrayData.length - 50, 0))

      var index = 0

      for (index = 0; index < arrayData.length; ++index) {
         let el = arrayData[index]
         let str_split = el[0].split(";")
         el = [parseInt(str_split[1].split(":")[0]), parseInt(str_split[2])  ]
         arrayData[index] = el
      }

      arrayData.unshift(['Time', 'Value'])


      // this new DataTable object holds all the data
      var data = new google.visualization.arrayToDataTable(arrayData);
      // CAPACITY - En-route ATFM delay - YY - CHART
      var crt_ertdlyYY = new google.visualization.ChartWrapper({
         chartType: 'LineChart',
         containerId: 'mycsv_1',
         dataTable: data,
         options:{
            width: 600, height: 300,
            title: 'График 1',
            titleTextStyle : {color: 'black', fontSize: 20},
         }
      });
      crt_ertdlyYY.draw();
   });
})
google.setOnLoadCallback(() => {
   $.get("data_11_6_1.csv", function(csvString) {
      // transform the CSV string into a 2-dimensional array
      var arrayData = $.csv.toArrays(csvString, {onParseValue: $.csv.hooks.castToScalar});
      arrayData = arrayData.slice(Math.max(arrayData.length - 50, 0))

      var index = 0

      for (index = 0; index < arrayData.length; ++index) {
         let el = arrayData[index]
         let str_split = el[0].split(";")
         el = [parseInt(str_split[1].split(":")[0]), parseInt(str_split[2])  ]
         arrayData[index] = el
      }

      arrayData.unshift(['Time', 'Value'])

      // this new DataTable object holds all the data
      var data = new google.visualization.arrayToDataTable(arrayData);
      // CAPACITY - En-route ATFM delay - YY - CHART
      var crt_ertdlyYY = new google.visualization.ChartWrapper({
         chartType: 'LineChart',
         containerId: 'mycsv_2',
         dataTable: data,
         options:{
            width: 600, height: 300,
            title: 'График 2',
            titleTextStyle : {color: 'black', fontSize: 20},
         }
      });
      crt_ertdlyYY.draw();
   });
})
</script>

</head>
<body>
<div id="mycsv_1"></div>
<div id="mycsv_2"></div>
</body>